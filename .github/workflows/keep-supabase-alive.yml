name: Keep Supabase Alive

on:
  schedule:
    # Runs every 3 days at 10:00 AM UTC (twice per week)
    - cron: '0 10 */3 * *'
  workflow_dispatch: # Allows manual trigger

jobs:
  ping-databases:
    runs-on: ubuntu-latest

    steps:
      - name: Ping Database 1
        run: |
          curl -X GET \
            'https://dfqaayjihclbmnwijryi.supabase.co/rest/v1/' \
            -H "apikey: ${{ secrets.SUPABASE_KEY_1 }}" \
            -H "Authorization: Bearer ${{ secrets.SUPABASE_KEY_1 }}"
          echo "Database 1 pinged successfully"

      - name: Ping Database 2
        run: |
          curl -X GET \
            'https://mkfpswmzsuulhzytlvmp.supabase.co/rest/v1/' \
            -H "apikey: ${{ secrets.SUPABASE_KEY_2 }}" \
            -H "Authorization: Bearer ${{ secrets.SUPABASE_KEY_2 }}"
          echo "Database 2 pinged successfully"
